
# The following issn are from source/wos-core_SCIE 2023-December-18.csv
# where only ISSN or eISSn is avaible. This script is to check whether the corresponding
# ISSN or eISSN are available from https://portal.issn.org
issn = scan(textConnection(
"0925-4005
1000-3304
1083-351X
1083-589X
1087-3562
1099-4300
1178-1998
1178-2021
1178-203X
1178-7031
1178-7066
1178-7074
1179-1594
1179-5549
1339-309X
1420-3049
1424-2818
1424-8220
1424-8247
1465-993X
1466-8033
1471-2172
1471-2288
1471-230X
1471-2318
1471-2334
1471-2369
1471-2377
1471-2393
1471-2407
1471-2415
1471-2431
1471-244X
1471-2458
1471-2474
1471-2482
1472-6750
1472-6823
1472-6874
1472-6920
1472-6947
1472-6963
1475-2840
1475-2859
1475-2867
1475-2875
1475-2891
1475-925X
1476-069X
1476-0711
1476-4598
1476-511X
1476-7120
1477-3155
1477-5956
1477-7525
1477-7819
1477-7827
1478-811X
1479-5868
1479-5876
1480-9222
1482-1826
1511-2780
1525-2027
1535-9484
1536-0121
1536-2442
1539-1663
1542-7390
1546-0096
1550-2783
1553-877X
1600-0870
1643-3750
1654-9880
1660-3397
1662-453X
1662-5102
1662-5110
1662-5137
1662-5188
1662-5196
1663-9812
1664-042X
1664-302X
1664-8021
1678-9199
1741-7007
1742-2094
1742-4690
1742-4755
1743-0003
1743-422X
1743-7075
1744-8069
1744-859X
1744-8603
1744-9081
1745-6150
1745-6215
1746-1596
1746-160X
1746-4269
1746-4811
1746-6148
1747-1028
1748-717X
1748-7188
1749-7728
1749-8090
1749-8104
1750-0443
1750-1172
1750-1326
1753-2000
1755-8166
1755-8794
1756-6606
1756-8722
1756-8935
1756-9966
1757-1146
1757-2215
1757-6512
1758-2652
1758-5996
1758-9193
1802-8829
1831-4732
1853-8665
1880-5981
1880-8190
1928-9022
1931-3195
1932-1058
1940-3372
1942-2466
1948-9358
1952-4005
1996-1073
1996-1944
1999-3110
1999-4907
1999-4915
1999-4923
2000-2297
2001-3078
2008-2231
2035-3006
2041-1723
2041-9139
2042-6410
2045-2322
2045-3701
2045-7022
2045-709X
2046-2069
2046-2441
2046-4053
2047-0525
2047-2382
2047-9980
2049-3002
2049-3614
2050-0068
2050-0505
2050-1161
2050-3385
2050-4527
2050-5094
2050-6201
2050-6511
2050-7771
2051-1426
2051-4190
2051-803X
2052-1537
2052-336X
2052-4439
2052-4463
2052-4897
2052-5206
2053-1095
2053-1591
2053-230X
2055-1010
2055-4877
2055-5008
2055-5660
2056-3132
2056-3485
2056-3744
2056-4538
2056-5968
2056-6387
2056-6646
2056-7189
2056-7936
2056-7944
2057-1577
2057-3960
2057-3995
2058-7716
2059-0105
2059-7029
2059-7037
2071-1050
2072-4292
2072-6643
2072-6651
2072-666X
2072-6694
2073-4344
2073-4352
2073-4360
2073-4395
2073-4409
2073-4425
2073-4433
2073-4441
2073-8994
2075-163X
2075-1680
2075-1702
2075-1729
2075-4418
2075-4426
2075-4442
2075-4450
2075-4701
2075-5309
2076-0817
2076-0825
2076-2607
2076-3417
2076-3425
2076-3921
2076-393X
2077-0375
2077-0383
2077-0472
2077-1312
2079-4983
2079-4991
2079-6374
2079-6412
2079-7737
2079-9292
2118-9773
2148-5607
2155-384X
2155-7470
2158-3226
2161-1653
2161-3311
2162-0989
2162-3619
2192-113X
2192-1709
2192-1962
2193-0074
2193-1127
2193-7532
2196-1115
2196-2995
2196-5412
2196-5641
2197-1714
2197-4365
2198-3844
2198-4034
2206-5865
2211-3355
2212-1374
2212-3717
2212-6864
2213-4530
2214-4269
2214-5818
2214-7160
2214-7829
2214-7861
2218-1989
2218-1997
2218-273X
2220-9964
2222-1751
2223-7747
2226-4310
2227-7390
2227-9032
2227-9040
2227-9059
2227-9067
2227-9717
2245-1919
2253-5969
2279-7254
2280-8000
2288-5048
2291-9694
2296-2565
2296-6463
2296-665X
2296-7745
2296-858X
2296-889X
2297-1769
2297-8739
2304-6732
2304-6740
2304-8158
2305-6304
2306-5354
2306-7381
2307-387X
2308-3425
2309-608X
2310-2861
2311-5637
2311-7524
2312-0541
2312-7481
2313-0105
2313-7673
2322-5939
2325-9671
2328-4277
2329-0501
2329-7778
2333-5084
2351-9894
2352-1791
2352-4588
2352-4928
2352-5541
2352-7102
2352-7714
2366-3987
2368-7460
2373-2822
2373-8057
2373-8065
2374-4677
2376-5992
2378-2242
2379-3708
2379-5042
2380-2359
2380-6761
2396-8370
2397-2106
2397-3129
2397-3358
2397-4621
2397-4648
2397-7000
2397-7132
2397-768X
2399-1984
2399-3421
2399-3529
2399-3642
2399-5300
2399-9772
2405-4569
2405-6308
2405-8440
2410-3888
2414-6366
2416-3953
2446-8231
2448-7589
2452-199X
2452-2198
2468-1253
2469-9322
2469-9888
2470-9239
2471-254X
2471-2906
2471-9625
2473-4284
2473-6988
2475-0379
2475-4455
2494-1271
2504-3110
2504-446X
2511-9044
2513-0390
2515-4184
2515-7639
2517-4843
2521-9766
2522-5812
2522-5820
2522-5839
2523-3548
2524-6372
2542-5196
2543-6376
2566-6223
2567-3165
2567-3173
2571-581X
2572-2611
2572-9241
2573-5144
2573-5438
2574-0970
2575-0356
2575-1077
2575-8314
2576-604X
2577-0187
2577-5421
2578-4854
2578-5478
2587-1250
2588-9311
2588-994X
2589-0042
2589-5370
2589-5559
2589-5974
2589-7500
2589-9147
2590-0412
2590-1567
2618-6500
2624-893X
2632-2153
2632-8682
2634-9833
2637-6113
2637-9368
2639-4979
2640-3501
2640-4567
2651-3579
2651-477X
2661-801X
2661-8850
2662-1347
2662-1355
2662-138X
2662-1991
2662-4435
2662-673X
2662-7671
2662-8465
2665-9271
2666-1659
2666-2817
2666-3864
2666-5247
2666-6065
2675-2824
2681-4617
2684-4907
2687-4792
2688-1594
2688-4062
2691-3399
2694-1783
2730-6011
2730-6844
2730-7182
2731-3654
2731-4235
2731-4553
2731-9229
2753-670X
2754-6993
2755-9734
2757-8038
2766-9645
2767-8490
2768-5241
2769-0911
2771-1897
2772-9508
2773-0123
2804-7699
2817-1713
2823-1465
2836-3310
2972-4066
2993-7175
0002-1857
0002-5100
0002-9726
0003-925X
0016-7878
0018-0971
0019-4522
0022-0019
0023-2076
0023-6152
0024-0966
0025-004X
0025-5645
0028-0712
0029-7704
0030-6126
0031-7454
0035-3930
0035-4066
0035-6808
0039-6060
0039-7660
0043-535X
0044-5134
0047-0767
0049-3864
0078-0421
0079-2047
0082-0598
0084-5841
0091-1062
0093-3651
0115-463X
0136-006X
0162-8178
0177-7726
0185-1101
0187-7380
0188-4999
0192-6225
0233-4755
0240-8759
0257-9731
0264-3707
0324-0770
0331-3689
0340-6253
0341-8391
0344-8657
0362-1588
0370-047X
0372-333X
0373-2967
0375-7633
0385-4035
0386-2194
0387-3870
0391-2612
0393-1420
0412-1961
0525-1931
0532-8721
0567-7351
0714-0045
0724-2247
0734-1415
0738-7989
0746-1739
0747-9964
0749-8004
0792-156X
0894-8275
0936-9902
0957-3720
0963-0651
0969-1251
0970-6011
0971-2070
0971-8966
1000-324X
1000-6818
1001-9014
1016-2364
1026-2881
1050-5164
1066-2936
1099-274X
1108-7161
1195-9479
1201-561X
1210-7913
1214-9705
1222-5347
1223-7027
1269-1763
1310-1331
1311-9109
1336-4561
1342-4580
1347-9466
1425-8129
1431-5254
1431-9292
1439-1783
1454-8658
1454-9069
1505-2249
1506-218X
1513-1874
1525-7886
1537-209X
1580-4003
1583-3186
1609-1833
1673-5447
1682-3559
1754-0925
1808-9798
1816-112X
1905-7873
1934-2608
1948-206X
1980-0436
1985-1944
2073-4859
2100-9619
2196-5099
2366-1313
2554-5280"), what = "character")


library(rvest)
fetch_issn = function(issn) {
	url = paste0("https://portal.issn.org/resource/ISSN/", issn)
	cat(url)
	html = read_html(url)

	text = html_elements(html, ".notice-sidebar p.sidebar-accordion-list-selected-item") |> html_text()
	text = text[grepl("Linking ISSN", text)]
	if(length(text)) {
		issn_l = gsub("Linking ISSN \\(ISSN-L\\): ", "", text)

		url = paste0("https://portal.issn.org/resource/ISSN-L/", issn_l)
		cat(" -> ", url, "\n")
		html = read_html(url)

		text = html_elements(html, "div.sidebar-accordion-list-selected-item") |> html_text()
		text = text[grepl("^ISSN  : ", text)]
		issn_all = gsub("^ISSN  : ", "", text)

		setdiff(issn_all, issn)
	} else {
		cat("not found\n")
		NULL
	}
}


map = lapply(issn, fetch_issn)
names(map) = issn
map = map[sapply(map, length) > 0]

df = data.frame(issn1 = rep(names(map), times = sapply(map, length)), issn2 = unlist(map))

write.csv(df, file = "source/issn_missing.csv", row.names = FALSE, quote = FALSE)
